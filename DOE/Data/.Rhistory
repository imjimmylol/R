"強盜" in df$type
"強盜" %in% df$type
df$type
library(dplyr)
df$type %>% summary()
df$type %>%  as.character()%>% summary()
df$type %>%  as.factor()%>% summary()
df %>% filter((type=="毒品")|(type=="機車竊盜"),(type=="汽車竊盜"),(type=="住宅竊盜"),(type=="強制性交"),(type=="強盜"),(type=="搶奪"))
df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
df$type %>% as.factor() %>% summary
df$dt[0]
df$dt
df$dt
tmp = df$dt
tmp[0]
tmp
tmp[1]
tmp[1][1]
tmp[1]
tmp[1] %>% str*()
tmp[1] %>% str()
tmp[1] %>% str()
tmp[1]
tmp[1] %>% class()
test = tmp[1]
test
library(stringr)
str_s
str_sub(test,start = 1, end = 2)
str_sub(test,start = 1, end = 3)
?paste0
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3)
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(y, m, d, sep = "-"))
}
test
test %>% d_trans()
df$data = df$dt %>% d_trans()
df = df[,-1]
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3)
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(y, m, d, sep = "-"))
}
df$data = df$dt %>% d_trans()
View(df)
df = df[,-2]
View(df)
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3)
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(y, m, d, sep = "-"))
}
df$data = df$dt %>% d_trans() %>% as.Date()
df = df[,-2]
View(df)
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
df$data = df$dt %>% d_trans() %>% as.Date()
df = df[,-2]
View(df)
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3 ))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
View(df)
df = df[,-c(2,3)]
df %>% head()
df$district %>% as.factor() %>% summary()
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3 ))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
df$loca
df$loca %>% as.factor() %>% summary()
df = df[,-c(2,3)]
df %>% head()
df = df %>% filter()
df$district %>% as.factor() %>% summary()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3 ))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date() %>% na.omit()
df = df[,-c(2,3)]
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3 ))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date() %>% na.omit()
df = df[,-c(2,3)]
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3 ))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
df %>% na.contiguous()
df %>% na.omit()
df = df %>% na.omit()
df = df[,-c(2,3)]
df %>% head()
df$district %>% as.factor() %>% summary()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 4 ))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
df = df %>% na.omit()
df = df[,-c(2,3)]
df %>% head()
# df = df %>% filter()
df$district %>% as.factor() %>% summary()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
df = df %>% na.omit()
df = df[,-c(2,3)]
df %>% head()
# df = df %>% filter()
df$district %>% as.factor() %>% summary()
df %>% filter((district!="外國")|(district!="台灣海")|(district!="外國"))
df = df %>% filter((district!="外國")|(district!="台灣海")|(district!="外國"))
df$district %>% as.factor() %>% summary()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
df = df %>% na.omit()
df = df[,-c(2,3)]
df %>% head()
# df = df %>% filter()
df$district %>% as.factor() %>% summary()
df = df %>% filter((district!="外國")&(district!="台灣海")&(district!="金門縣")&(district!="連江縣"))
df$district %>% as.factor() %>% summary()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.Date()
df = df %>% na.omit()
df = df[,-c(2,3)]
df %>% head()
# df = df %>% filter()
df$district %>% as.factor() %>% summary()
df = df %>% filter((district!="外國")&(district!="台灣海")&(district!="金門縣")&(district!="連江縣")&(district!="澎湖縣"))
df$district %>% as.factor() %>% summary()
# df$district %>% as.factor() %>% summary()
df %>% head()
as.POSIXct
as.POSIXct0-
5
as.POSIXct()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.POSIXct("%Y-%m-%d")
df = df %>% na.omit()
df = df[,-c(2,3)]
df %>% head()
# df = df %>% filter()
df$district %>% as.factor() %>% summary()
df = df %>% filter((district!="外國")&(district!="台灣海")&(district!="金門縣")&(district!="連江縣")&(district!="澎湖縣"))
# df$district %>% as.factor() %>% summary()
df %>% head()
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$data = df$dt %>% d_trans() %>% as.POSIXct("%Y-%m-%d")
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
return(paste(as.character(y+1911), m, d, sep = "-"))
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$date = df$dt %>% d_trans() %>% as.POSIXct("%Y-%m-%d")
df = df %>% na.omit()
df$date
as.POSIXct(,"%Y-%m-%d")
df$dt
"1040322" %>% d_trans()
test = "1040322" %>% d_trans()
test
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
ymd = paste(as.character(y+1911), m, d, sep = "-")
return(ymd)
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$date = df$dt %>% d_trans()
df$date
"2015-01-18" %>% as.POSIXct("%Y-%m-%d")
"2015-01-18" %>% as.Date() %>% format("%Y-%m-%d")
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
ymd = paste(as.character(y+1911), m, d, sep = "-")
return(ymd)
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
df$date = df$dt %>% d_trans() %>% format("%Y-%m-%d")
df = df %>% na.omit()
View(df)
df$dt %>% d_trans()
tmp = df$dt %>% d_trans()
tmp
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
ymd = paste(as.character(y+1911), m, d, sep = "-")
return(ymd)
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
tmp = df$dt %>% d_trans()  # a=as.POSIXct("2014-05-01", format="%Y-%m-%d")
date = c()
for(i in tmp){
qq = as.POSIXct(i, format="%Y-%m-%d")
date = append(date, qq)
}
as.POSIXct(tmp[1], format="%Y-%m-%d")
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(readr)
library(dplyr)
library(stringr)
df =  readxl::read_xlsx("test.xlsx")
# type = c("毒品", "機車竊盜", "汽車竊盜", "住宅竊盜", "強制性交", "強盜", "搶奪")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
ymd = paste(as.character(y+1911), m, d, sep = "-")
return(ymd)
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
tmp = df$dt %>% d_trans()  # a=as.POSIXct("2014-05-01", format="%Y-%m-%d")
date = c()
for(i in tmp){
qq = as.POSIXct(i, format="%Y-%m-%d")
date = append(date, qq)
}
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(dplyr)
library(stringr)
df = readxl::read_xlsx("crmi.xlsx")
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(dplyr)
library(stringr)
df = readxl::read_xlsx("crmi.xlsx")
df = readxl::read_xlsx("crmi106.xlsx")
df = readxl::read_xlsx("crim106.xlsx")
View(df)
setwd("C:/Users/user/Desktop/R/DOE/Data")
library(dplyr)
library(stringr)
df = readxl::read_xlsx("crim106.xlsx")
df = df %>% filter((type=="毒品")|(type=="機車竊盜")|(type=="汽車竊盜")|(type=="住宅竊盜")|(type=="強制性交")|(type=="強盜")|(type=="搶奪"))
d_trans = function(raw_d){
y = str_sub(raw_d, start = 1, end = 3) %>% as.numeric()
m = str_sub(raw_d, start = 4, end = 5)
d = str_sub(raw_d, start = 6, end = 7)
ymd = paste(as.character(y+1911), m, d, sep = "-")
return(ymd)
}
loca_trans = function(raw_loca){
return(str_sub(raw_loca, start = 1, end = 3))
}
df$district = df$loca %>% loca_trans()
tmp = df$dt %>% d_trans()  # a=as.POSIXct("2014-05-01", format="%Y-%m-%d")
date = c()
for(i in tmp){
qq = as.POSIXct(i, format="%Y-%m-%d")
date = append(date, qq)
}
View(df)
df = df[,-c(2,3)]
df$date = date
View(df)
df$date[1]
